<h2 id="security">About security :</h2>
<h3>Use Secure websocket</h3>
<p>You can use websocket secure.</p>
<p>For use Websocket secured, use simply the https protocol for your web application. That's all</p>
<h3>JAAS Security</h3>
<p>Websocket cannot use standard JAAS RBAC (Role Base Access Control) Cause Enpoint is not include in user thread.</p>
<p>For fix this problem and keep the compatibility with all servers, we introduce a new annotation similar to the standard JAAS annotation : <b>@org.ocelotds.annotations.RolesAllowed</b>.</p>
<p>You can use it as the standard annotation.</p>
<h4>RolesAllowed</h4>
<p>Declare ROLE in standard web.xml, and annotate your methods with it.</p>
<pre><code class="java">public class MyService {
   @org.ocelotds.annotations.RolesAllowed("ADMIN") // not javax.annotation.security.RolesAllowed
   public void adminSecureMethod() {
   }
   @RolesAllowed({"USER", "ADMIN"}) 
   public void secureMethod() {
   }
}</code></pre>
<h4>OcelotContext</h4>
<p>As JAAS, you can inject a context allows programmatic security.</p>
<pre><code class="java">public class MyService {
   @Inject
   OcelotContext oc;
   public void secureMethod() {
      if(oc.isUserInRole("ADMIN")) {
         // ok
      }	
   }
}</code></pre>
<h3>About topics security :</h3>
<p>But Ocelot manages the security about topic.</p>
<p>By default every clients can subscribe to a topic, but probably you need to control that.</p>
<p>Ocelotds is CDI based and allow an ellegant mecanism for manage it.</p>
<h4>Creation a global policy for all topics.</h4>
<p>It's Very simple just create a default CDI Bean that implements <strong>org.ocelotds.security.TopicAccessControl</strong> in the war project.</p>
<pre><code class="java">public class GlobalTopicAccessControl implements TopicAccessControl {
   @Override
   public void checkAccess(Session session, String topic) throws IllegalAccessException {
      // if access not allowed, throw IllegalAccessException
   }
}</code></pre>
<h4>Creation a policy for specific topic.</h4>
<p>It's Very simple too, create a annotated CDI Bean that implements <strong>org.ocelotds.security.TopicAccessControl</strong> and Qualified by <strong>org.ocelotds.security.TopicControl</strong>.</p>
<pre><code class="java">@JsTopicAccessControl(SPECIFIC_TOPIC)
public class GlobalTopicAccessControl implements TopicAccessControl {
   @Override
   public void checkAccess(Session session, String topic) throws IllegalAccessException {
      // if access to SPECIFIC_TOPIC not allowed, throw IllegalAccessException
   }
}</code></pre>
